<div class="col-lg-12">
	<div class="row">
		<form id="stock_invoice_form">
			<div class="col-sm-5">
		  		<div class="form-group">
				    <label for="inputEmail3" class="col-sm-2 control-label">Sys No.</label>
				    <div class="col-sm-3">
		      			<input type="text" class="form-control" id="inputEmail3" placeholder="">
		    		</div>
		    		<label for="inputEmail3" class="col-sm-1 control-label inner-label">Year</label>
				    <div class="col-sm-2">
		      			<input type="text" class="form-control" id="inputEmail3" placeholder="">
		    		</div>
		    		<label for="inputEmail3" class="col-sm-1 control-label inner-label">Date</label>
				    <div class="col-sm-3 date-group">
		      			<input type="text" class="form-control" id="inputEmail3" placeholder="">
		    		</div>
	  			</div>
	  			
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group ">
				    <label for="inputPassword3" class="col-sm-2 control-label">Doc No.</label>
				    <div class="col-sm-4 doc-no-group">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			    	<label for="inputPassword3" class="col-sm-2 control-label inner-label">Type</label>
				    <div class="col-sm-4">
			      		<label><input type="radio" class="" id="inputPassword3" placeholder="" name="paymentType"> CASH</label>
			      		<label><input type="radio" class="" id="inputPassword3" placeholder="" name="paymentType"> CREDIT</label>
			    	</div>
			  	</div>
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group">
				    <label for="inputPassword3" class="col-sm-2 control-label">Location</label>
				    <div class="col-sm-10">
			      		<select class="form-control" id="location" style="width: 100%"></select>
			    	</div>
			  	</div>
			  	
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group">
				    <label for="inputPassword3" class="col-sm-2 control-label">Description</label>
				    <div class="col-sm-10">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			  	</div>
		  	</div>
		  	<div class="col-sm-2 payment-group">
		  		<div class="form-group">
				    <label for="inputEmail3" class="col-sm-2 control-label">Payment</label>
				    <div class="col-sm-10">
		      			<input type="text" class="form-control" id="inputEmail3" placeholder="">
		    		</div>
	  			</div>
	  			
		  	</div>
		  	<div class="col-sm-5">
		  		<div class="form-group">
				    <label for="inputEmail3" class="col-sm-2 control-label">Customer</label>
				    <div class="col-sm-10">
		      			<input type="text" class="form-control" id="inputEmail3" placeholder="">
		    		</div>
	  			</div>
	  			
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group">
				    <label for="inputPassword3" class="col-sm-2 control-label">Address</label>
				    <div class="col-sm-10">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			  	</div>
			  	
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group">
				    <label for="inputPassword3" class="col-sm-2 control-label">Phone</label>
				    <div class="col-sm-3">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			    	<label for="inputPassword3" class="col-sm-2 control-label lpo-label">LPO NO.</label>
				    <div class="col-sm-2 lpo-group">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			    	<label for="inputPassword3" class="col-sm-1 control-label">Date</label>
				    <div class="col-sm-2 date-left-group">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			  	</div>
			  	<br/>
				<div class="clearfix"></div>
			  	<div class="form-group">
				    <label for="inputPassword3" class="col-sm-2 control-label">S.Person</label>
				    <div class="col-sm-10">
			      		<input type="text" class="form-control" id="inputPassword3" placeholder="">
			    	</div>
			  	</div>
			  	
		  	</div>
		  	
		  	<div class="form-group">
			    <div class="col-sm-12 search-btn">
	     			<button class="btn btn-primary">Search</button>
	     			<button type="reset" class="btn btn-danger">Clear</button>
		   		</div>
			</div>
		</form>
		
		
	  			
		
	</div>
	<br/>
	<div class="clearfix"></div>
	<div class="row">
	<!-- Create Button -->
		<button type="button" class="btn btn-success pull-right"
		data-toggle="modal" data-target="#formModal" id="createButton" data-backdrop="static"
		data-keyboard="false">Create Sales Invoice</button>	
	<!-- /Create Button -->
	</div>
	
	<div class="modal fade" id="formModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form data-async data-target="#rating-modal" id="createSalesInvoiceForm" th:object="${salesInvoiceForm}"
					th:action="@{/api/sales/invoices}" method="POST">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="modalLabel">Add Unit</h4>
					</div>
	
					<div class="panel-body">
					
						<div class="form-group" id="errors"></div>
						
						<div class="form-group">
							<label>Year</label>
							<input type="number" class="form-control" th:field="*{year}" maxlength="4">
						</div>
						<div class="form-group">
							<label>Transaction Date</label> 
							<input class="form-control" th:field="*{transactionDate}"></input>
						</div>
	
						<div class="form-group">
							<label>Document Number</label> 
							<input class="form-control" th:field="*{documentNumber}" maxlength="30"></input>
						</div>
						
						<div class="form-group">
							<label>Sales Person</label> 
							<select class="form-control" th:field="*{salesPerson}">
								<option selected value=" ">-- select an option --</option>
								<option th:each="salesPerson : ${sales}"	th:value="${salesPerson.id}" th:text="${salesPerson.username}"></option>
							</select>
						</div>
						
						<div class="form-group">
							<label>Location</label> 
							<select class="form-control" th:field="*{location}">
								<option selected value=" ">-- select an option --</option>
								<option th:each="location : ${locations}"	th:value="${location.id}" th:text="${location.name}"></option>
							</select>
						</div>
						
						<div class="form-group">
							<label>Payment Method</label> 
							<select class="form-control" th:field="*{paymentMethod}">
								<option  th:each="paymentMethod : ${T(com.bartolay.inventory.enums.PaymentMethod).values()}"
							          th:value="${paymentMethod}" 
							          th:text="${paymentMethod}">
							   </option>
							</select>
						</div>
						
						
						
					</div>
	
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button type="submit" id="submit" class="btn btn-success btn-primary">Create</button>
					</div>
				</form>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>


		<!-- /.modal -->
	<!-- Delete Modal -->
	<div class="modal fade" id="confirmCancelModal" tabindex="-2" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
	        
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	                <h4 class="modal-title" id="myModalLabel">Confirm Cancel</h4>
	            </div>
	        
	            <div class="modal-body">
	                <p>You are about to cancel <b id="recordName"></b>, this procedure is irreversible.</p>
	                <p>Do you want to proceed?</p>
	                <p class="debug-url"></p>
	            </div>
	            
	            <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	                <a class="btn btn-danger" id="btnConfirmCancel">Confirm</a>
	            </div>
	        </div>
	    </div>
	</div>
	<!-- /Delete Modal -->
	
	<div class="panel panel-default">
		<!-- /.panel-heading -->
		<div class="panel-body">
			<table width="100%"
				class="table table-striped table-bordered table-hover"
				id="category-datatable">
				<thead>
					<tr>
						<th>SN</th>
						<th>CODE</th>
						<th>DESCRIPTION</th>
						<th>UNIT</th>
						<th>U-DESC</th>
						<th>QTY</th>
						<th>UNIT PRICE</th>
						<th>ACTIONS</th>
					</tr>
				</thead>
				
			</table>
			<!-- /.table-responsive -->
		</div>
		<!-- /.panel-body -->
	</div>
	<!-- /.panel -->
</div>



	

<!-- DataTables JavaScript -->
<script
	th:src="@{/static/vendor/datatables/js/jquery.dataTables.min.js}"></script>
<script
	th:src="@{/static/vendor/datatables-plugins/dataTables.bootstrap.min.js}"></script>
<script
	th:src="@{/static/vendor/datatables-responsive/dataTables.responsive.js}"></script>

<script>
/*<![CDATA[*/
	
	var DOCS = $(document);
	var formModal = $("#formModal");
	var modalLabel = formModal.find("#modalLabel");
	var submitButtonLabel = $("#formModal #submit");
	var form = $("#createSalesInvoiceForm");
	var table = $('#category-datatable');
	var datatable = customDatatable(table, '/api/datatable/sales/invoices', 
			[
            	{ "data": "system_number", "name" : "SN", "title" : "SN",},
            	{ "data": "code", "name" : "CODE", "title" : "CODE",},
            	{ "data": "description", "name" : "DESCRIPTION", "title" : "DESCRIPTION",},
            	{ "data": "unit", "name" : "UNIT", "title" : "UNIT",},
            	{ "data": "quantity", "name" : "QTY", "title" : "QTY",},
            	{ "data": "unit_price", "name" : "UNIT PRICE", "title" : "UNIT PRICE",},
            	{ "data": "amount", "name" : "AMOUNT", "title" : "AMOUNT",},
        	],
        	[ 
        		{
                    "targets": 7,
                    "data": null,
                    "defaultContent": 
                    	'<div class="btn-group" role="group">'
                    	+ '<button class="btn btn-default glyphicon glyphicon-eye-open" id="btnView"/>'
                    	+ '<button type="button" class="btn btn-danger glyphicon glyphicon-remove" data-toggle="modal" data-target="#confirmCancelModal" data-backdrop="static" data-keyboard="false" id="btnCancel" />'
                    	+ '</div>'
                    	
                    	
                }
        	]
	);
	
	loadLocationData();
	
	
	
	function loadLocationData(){
		$('#location').select2({
	  		ajax: {
		    	url: '/api/sales/locations',
		    	dataType: 'json',
		    	delay: 250
		 	}
		});
	}
	
	
	$("#createButton").on('click', function (e) {
		form[0].reset();
		form.attr("method", "POST"); // change to POST when editing
		form.find('#id').val("");
		modalLabel.text("Create Sales Invoice");
		submitButtonLabel.text("Create");

		singledatetimepicker($("input#transactionDate"))
		$("input#transactionDate").val(moment(new Date()).format("YYYY-MM-DD HH:mm:ss"))
	});

	var confirmCancelModal = $("#confirmCancelModal");
    var data = null;
 	// Delete button
    table.find("tbody").on('click', '#btnCancel', function (e) {
        /* e.preventDefault(); */
 		
        data = datatable.row( $(this).parent('td') ).data();
        console.log(data)
        confirmCancelModal.find("#recordName").text(data['system_number']);
        
    });
	// Confirm Delete button
    DOCS.on('click', '#btnConfirmCancel', function(e) {
    	$(this).attr("disabled", "disabled");
    
    	$(this).removeAttr("disabled");
    	console.log($(this));
    	DELETE("/api/sales/invoices/" + data['system_number'], function(data) {
    		showToast(data);
    		console.log(data)
    		confirmCancelModal.modal('hide');
    		datatable.ajax.reload( null, false ); // user paging is not reset on reload
    	});
    });
	
	formModalAsync($("#formModal"), function() {
		datatable.ajax.reload( null, false ); // user paging is not reset on reload
	});
	
	// View button
    table.find("tbody").on('click', '#btnView', function (e) {
        e.preventDefault();
 		
        var data = datatable.row($(this).parent('div').parent('td')).data();
        window.location="/sales/invoice/" + data.system_number;
        
    } );
/*]]>*/
</script>