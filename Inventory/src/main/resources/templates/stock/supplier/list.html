<div class="">
	<!-- Title and action -->
	<div class="page-title">
		<div class="title_left">
			<h3>Suppliers</h3>
		</div>

		<div class="title_right">
			<div class="pull-right">
				<div class="input-group ">
					<button id="newSupplier"
						class="btn btn-success btn-sm"><span class="fa fa-plus"></span>
						New Supplier</button>
				</div>
			</div>
		</div>
	</div>

	<div class="clearfix"></div>
	<!-- //Title and action -->

	<div class="col-md-12 col-sm-12 col-xs-12">
		<div class="x_panel">
			<div class="x_title">
				<div class="col-md-6">
					<h2>List of Suppliers</h2>
				</div>
				<div class="clearfix"></div>
			</div>

			<div class="x_content">

				<div class="table-responsive">
					<table class="table table-striped" id="openingStock-datatable"
						style="width: 100%">
						<thead>
							<tr>
								<th>SN</th>
								<th>Name</th>
								<th>Address</th>
								<th>Phone</th>
								<th>Mobile</th>
								<th>Email</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
						
						</tbody>

					</table>
				</div>`
			</div>
		</div>
	</div>
</div>

<div th:include="includes/modals/supplier_new"></div>
<!-- DataTables JavaScript -->
<script
	th:src="@{/static/vendor/datatables/js/jquery.dataTables.min.js}"></script>
<script
	th:src="@{/static/vendor/datatables-plugins/dataTables.bootstrap.min.js}"></script>
<script
	th:src="@{/static/vendor/datatables-responsive/dataTables.responsive.js}"></script>
<script>
	var table = $('#openingStock-datatable');
	
	 var datatable = customFixedDatatable(table, '/api/datatable/suppliers', 
		[
        	{ 
        		data: "id",
        		render: function ( data, type, row ) {
                    return '<a href="/stock/opening/'+ data +'">' + data + '</a>';
                }
        	},
        	{ 
        		data: "company_name",
        		render: function ( data, type, row ) {
                    return '<a href="/stock/opening/'+ row.system_number +'">' + data + '</a>';
                }
        	},
        	{ data: "billing_address" },
        	{ 
        		data: "contact_phone",
        		render: function ( data, type, row ) {
                    return '<a href="/locations/'+ row.location_id +'">' + data + '</a>';
                },
                defaultContent: ""
        	},
        	{ data: "contact_mobile",
                defaultContent: "" },
        	{ data: "contact_email",
                    defaultContent: "" },
            {
				render: function(data, type, row) {
					return `<button class="btn btn-primary btn-xs" onClick="triggerEditSupplier(this)" data-id="`+row.id+`"><span class="fa fa-edit"></span></button>`;
				}
            }
    	]
	); 
	 
	//----------------------------------------------------------------------------------------------------------------
	 $("#newSupplier").on("click",function() {
	 	newSupplier({}, function(data){
	 		
	 		console.log(data);
	 		datatable.ajax.reload();
	 	});
	 });
	
	function triggerEditSupplier(e) {
		console.log(e);
		console.log($(e).data("id"));
		
		editSupplier({id: $(e).data("id")}, function(data) {
			console.log(data);
		});
	}
</script>